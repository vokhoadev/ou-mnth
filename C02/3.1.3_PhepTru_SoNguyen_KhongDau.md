# 3.1.3 PHÉP TRỪ SỐ NGUYÊN KHÔNG DẤU

## Mô tả dạng bài tập
Thực hiện phép trừ giữa hai số nguyên không dấu và xử lý tràn số (underflow).

## Phương pháp giải

### Phương pháp 1: Trừ trực tiếp
1. **Trừ hai số** như bình thường
2. **Kiểm tra tràn số** (underflow)
3. **Xử lý kết quả** theo yêu cầu

### Phương pháp 2: Xử lý tràn số
1. **Tràn số**: kết quả < 0
2. **Kết quả thực tế**: kết quả + 2^n
3. **Borrow flag**: bit mượn (nếu có)

## Bảng tràn số:
| Số bit | Phạm vi | Tràn khi |
|--------|---------|----------|
| 4      | 0-15    | < 0      |
| 8      | 0-255   | < 0      |
| 16     | 0-65535 | < 0      |
| 32     | 0-4294967295 | < 0 |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Trừ 7 - 5 trong 4 bit không dấu

**Lời giải:**
```
  0111₂ (7₁₀)
- 0101₂ (5₁₀)
-------
  0010₂ (2₁₀)

Kiểm tra tràn:
7 - 5 = 2 ≥ 0 ✓
Không tràn số

Kết quả: 7 - 5 = 2 (4 bit không dấu)
```

### Bài 2: Trừ 5 - 7 trong 4 bit không dấu

**Lời giải:**
```
  0101₂ (5₁₀)
- 0111₂ (7₁₀)
-------
  1110₂ (14₁₀)

Kiểm tra tràn:
5 - 7 = -2 < 0 ✗
Có tràn số

Kết quả thực tế: -2 + 16 = 14
Kết quả: 5 - 7 = 14 (4 bit không dấu, có tràn)
```

### Bài 3: Trừ 150 - 100 trong 8 bit không dấu

**Lời giải:**
```
  10010110₂ (150₁₀)
- 01100100₂ (100₁₀)
-------
  00110010₂ (50₁₀)

Kiểm tra tràn:
150 - 100 = 50 ≥ 0 ✓
Không tràn số

Kết quả: 150 - 100 = 50 (8 bit không dấu)
```

### Bài 4: Trừ 100 - 150 trong 8 bit không dấu

**Lời giải:**
```
  01100100₂ (100₁₀)
- 10010110₂ (150₁₀)
-------
  11010110₂ (214₁₀)

Kiểm tra tràn:
100 - 150 = -50 < 0 ✗
Có tràn số

Kết quả thực tế: -50 + 256 = 206
Kết quả: 100 - 150 = 206 (8 bit không dấu, có tràn)
```

### Bài 5: Trừ 1 - 1 trong 8 bit không dấu

**Lời giải:**
```
  00000001₂ (1₁₀)
- 00000001₂ (1₁₀)
-------
  00000000₂ (0₁₀)

Kiểm tra tràn:
1 - 1 = 0 ≥ 0 ✓
Không tràn số

Kết quả: 1 - 1 = 0 (8 bit không dấu)
```

### Bài 6: Trừ 0 - 1 trong 8 bit không dấu

**Lời giải:**
```
  00000000₂ (0₁₀)
- 00000001₂ (1₁₀)
-------
  11111111₂ (255₁₀)

Kiểm tra tràn:
0 - 1 = -1 < 0 ✗
Có tràn số

Kết quả thực tế: -1 + 256 = 255
Kết quả: 0 - 1 = 255 (8 bit không dấu, có tràn)
```

### Bài 7: Trừ 2000 - 1000 trong 16 bit không dấu

**Lời giải:**
```
  0000011111010000₂ (2000₁₀)
- 0000001111101000₂ (1000₁₀)
-------
  0000001111101000₂ (1000₁₀)

Kiểm tra tràn:
2000 - 1000 = 1000 ≥ 0 ✓
Không tràn số

Kết quả: 2000 - 1000 = 1000 (16 bit không dấu)
```

### Bài 8: Trừ 1000 - 2000 trong 16 bit không dấu

**Lời giải:**
```
  0000001111101000₂ (1000₁₀)
- 0000011111010000₂ (2000₁₀)
-------
  1111110000011000₂ (64536₁₀)

Kiểm tra tràn:
1000 - 2000 = -1000 < 0 ✗
Có tràn số

Kết quả thực tế: -1000 + 65536 = 64536
Kết quả: 1000 - 2000 = 64536 (16 bit không dấu, có tràn)
```

### Bài 9: Trừ 2000000 - 1000000 trong 32 bit không dấu

**Lời giải:**
```
  00000000000111101000010010000000₂ (2000000₁₀)
- 00000000000011110100001001000000₂ (1000000₁₀)
-------
  00000000000011110100001001000000₂ (1000000₁₀)

Kiểm tra tràn:
2000000 - 1000000 = 1000000 ≥ 0 ✓
Không tràn số

Kết quả: 2000000 - 1000000 = 1000000 (32 bit không dấu)
```

### Bài 10: Trừ 1000000 - 2000000 trong 32 bit không dấu

**Lời giải:**
```
  00000000000011110100001001000000₂ (1000000₁₀)
- 00000000000111101000010010000000₂ (2000000₁₀)
-------
  11111111111100001011110111000000₂ (4293967296₁₀)

Kiểm tra tràn:
1000000 - 2000000 = -1000000 < 0 ✗
Có tràn số

Kết quả thực tế: -1000000 + 4294967296 = 4293967296
Kết quả: 1000000 - 2000000 = 4293967296 (32 bit không dấu, có tràn)
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Trừ 5 - 3 trong 4 bit không dấu
2. Trừ 9 - 7 trong 4 bit không dấu
3. Trừ 12 - 4 trong 4 bit không dấu
4. Trừ 15 - 1 trong 4 bit không dấu
5. Trừ 0 - 0 trong 4 bit không dấu
6. Trừ 100 - 50 trong 8 bit không dấu
7. Trừ 200 - 150 trong 8 bit không dấu
8. Trừ 250 - 10 trong 8 bit không dấu
9. Trừ 255 - 0 trong 8 bit không dấu
10. Trừ 0 - 255 trong 8 bit không dấu

### Cấp độ trung bình (11-15):
11. Trừ 5000 - 1000 trong 16 bit không dấu
12. Trừ 20000 - 10000 trong 16 bit không dấu
13. Trừ 50000 - 10000 trong 16 bit không dấu
14. Trừ 60000 - 5000 trong 16 bit không dấu
15. Trừ 65535 - 0 trong 16 bit không dấu

### Cấp độ nâng cao (16-20):
16. Trừ 5000000 - 1000000 trong 32 bit không dấu
17. Trừ 20000000 - 10000000 trong 32 bit không dấu
18. Trừ 50000000 - 10000000 trong 32 bit không dấu
19. Trừ 100000000 - 50000000 trong 32 bit không dấu
20. Trừ 4294967295 - 0 trong 32 bit không dấu

---

##  MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Trừ như bình thường** trước
- **Kiểm tra tràn số** sau
- **Xử lý kết quả** theo yêu cầu
- **Nhớ công thức** tràn: kết quả < 0

### LƯU Ý QUAN TRỌNG:
- **Tràn số** không phải lỗi, mà là đặc tính
- **Kết quả thực tế** = kết quả + 2^n
- **Borrow flag** = bit mượn (nếu có)
- **Kiểm tra** tràn trước khi sử dụng

### CÁCH KIỂM TRA:
- **Tính toán** kết quả trước
- **So sánh** với 0
- **Xử lý** tràn nếu cần
- **Kiểm tra** bằng máy tính

### CÁC TRƯỜNG HỢP ĐẶC BIỆT:
- **A - 0 = A** (trừ 0)
- **A - A = 0** (trừ chính nó)
- **0 - 1 = 2^n - 1** (tràn hoàn toàn)

### PHƯƠNG PHÁP NHANH:
1. **Trừ** hai số
2. **Kiểm tra** tràn số
3. **Xử lý** kết quả
4. **Ghi** kết quả cuối cùng

### VÍ DỤ ỨNG DỤNG:
```cpp
// Phép trừ số nguyên không dấu
struct UnsignedSubResult {
    int result;
    bool underflow;
};

UnsignedSubResult unsignedSub(int a, int b, int bits) {
    int maxValue = (1 << bits) - 1;
    int diff = a - b;
    bool underflow = diff < 0;
    
    if (underflow) {
        diff = diff + (1 << bits);
    }
    
    return {diff, underflow};
}

// Kiểm tra tràn số
bool checkUnderflow(int a, int b, int bits) {
    return (a - b) < 0;
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: Unsigned arithmetic
- **Assembly**: SUB instruction với borrow flag
- **Counters**: Loop counters, array indices
- **Memory addressing**: Address calculations
- **Hash functions**: Checksum calculations

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 3.1: Biểu diễn số nguyên không dấu
