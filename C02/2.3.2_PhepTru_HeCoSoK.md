# 2.3.2 PHÉP TRỪ HỆ CƠ SỐ K

## Mô tả dạng bài tập
Thực hiện phép trừ giữa hai số trong hệ đếm cơ số K bất kỳ bằng phương pháp trừ trực tiếp hoặc sử dụng bù K.

## Phương pháp giải

### Phương pháp 1: Trừ trực tiếp
1. **Viết hai số** theo cột
2. **Trừ từ phải sang trái**
3. **Mượn K** từ chữ số bên trái khi cần thiết

### Phương pháp 2: Sử dụng bù K
1. **Tìm bù K** của số trừ
2. **Cộng** số bị trừ với bù K của số trừ
3. **Bỏ bit tràn** nếu có

## Bảng trừ hệ cơ số K:
| A | B | A - B | Mượn |
|---|---|-------|------|
| 0 | 0 | 0     | 0    |
| 0 | 1 | K-1   | 1    |
| 1 | 0 | 1     | 0    |
| 1 | 1 | 0     | 0    |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Tính 12₃ - 21₃

**Lời giải:**
```
  12₃
- 21₃
-----
 21₃

Chi tiết:
Vị trí 0: 2 - 1 = 1
Vị trí 1: 1 - 2 = 2 (mượn 3 từ vị trí 2)

Kết quả: 12₃ - 21₃ = 21₃
```

### Bài 2: Tính 23₄ - 31₄

**Lời giải:**
```
  23₄
- 31₄
-----
 32₄

Chi tiết:
Vị trí 0: 3 - 1 = 2
Vị trí 1: 2 - 3 = 3 (mượn 4 từ vị trí 2)

Kết quả: 23₄ - 31₄ = 32₄
```

### Bài 3: Tính 34₅ - 42₅

**Lời giải:**
```
  34₅
- 42₅
-----
 42₅

Chi tiết:
Vị trí 0: 4 - 2 = 2
Vị trí 1: 3 - 4 = 4 (mượn 5 từ vị trí 2)

Kết quả: 34₅ - 42₅ = 42₅
```

### Bài 4: Tính 45₆ - 53₆

**Lời giải:**
```
  45₆
- 53₆
-----
 52₆

Chi tiết:
Vị trí 0: 5 - 3 = 2
Vị trí 1: 4 - 5 = 5 (mượn 6 từ vị trí 2)

Kết quả: 45₆ - 53₆ = 52₆
```

### Bài 5: Tính 56₇ - 64₇

**Lời giải:**
```
  56₇
- 64₇
-----
 62₇

Chi tiết:
Vị trí 0: 6 - 4 = 2
Vị trí 1: 5 - 6 = 6 (mượn 7 từ vị trí 2)

Kết quả: 56₇ - 64₇ = 62₇
```

### Bài 6: Tính 67₈ - 75₈

**Lời giải:**
```
  67₈
- 75₈
-----
 72₈

Chi tiết:
Vị trí 0: 7 - 5 = 2
Vị trí 1: 6 - 7 = 7 (mượn 8 từ vị trí 2)

Kết quả: 67₈ - 75₈ = 72₈
```

### Bài 7: Tính 78₉ - 86₉

**Lời giải:**
```
  78₉
- 86₉
-----
 82₉

Chi tiết:
Vị trí 0: 8 - 6 = 2
Vị trí 1: 7 - 8 = 8 (mượn 9 từ vị trí 2)

Kết quả: 78₉ - 86₉ = 82₉
```

### Bài 8: Tính 89₁₁ - 97₁₁

**Lời giải:**
```
  89₁₁
- 97₁₁
-----
 92₁₁

Chi tiết:
Vị trí 0: 9 - 7 = 2
Vị trí 1: 8 - 9 = 9 (mượn 11 từ vị trí 2)

Kết quả: 89₁₁ - 97₁₁ = 92₁₁
```

### Bài 9: Tính 9A₁₂ - A8₁₂

**Lời giải:**
```
  9A₁₂
- A8₁₂
-----
 B2₁₂

Chi tiết:
Vị trí 0: A - 8 = 2
Vị trí 1: 9 - A = B (mượn 12 từ vị trí 2)

Kết quả: 9A₁₂ - A8₁₂ = B2₁₂
```

### Bài 10: Tính AB₁₃ - B9₁₃

**Lời giải:**
```
  AB₁₃
- B9₁₃
-----
 C2₁₃

Chi tiết:
Vị trí 0: B - 9 = 2
Vị trí 1: A - B = C (mượn 13 từ vị trí 2)

Kết quả: AB₁₃ - B9₁₃ = C2₁₃
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Tính 12₃ - 10₃
2. Tính 23₄ - 11₄
3. Tính 34₅ - 22₅
4. Tính 45₆ - 33₆
5. Tính 56₇ - 44₇
6. Tính 67₈ - 55₈
7. Tính 78₉ - 66₉
8. Tính 89₁₁ - 77₁₁
9. Tính 9A₁₂ - 88₁₂
10. Tính AB₁₃ - 99₁₃

### Cấp độ trung bình (11-15):
11. Tính BC₁₄ - AA₁₄
12. Tính CD₁₅ - BB₁₅
13. Tính DE₁₆ - CC₁₆
14. Tính EF₁₇ - DD₁₇
15. Tính FG₁₈ - EE₁₈

### Cấp độ nâng cao (16-20):
16. Tính GH₁₉ - FF₁₉
17. Tính HI₂₀ - GG₂₀
18. Tính IJ₂₁ - HH₂₁
19. Tính JK₂₂ - II₂₂
20. Tính KL₂₃ - JJ₂₃

---

## MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Trừ từ phải sang trái**
- **Mượn K** từ chữ số bên trái khi cần
- **Sử dụng bù K** cho số lớn
- **Kiểm tra** bằng cách cộng ngược lại

### LƯU Ý QUAN TRỌNG:
- **Mượn K** = thêm K vào chữ số hiện tại
- **Bù K** = bù (K-1) + 1
- **Bỏ bit tràn** khi sử dụng bù K
- **Kiểm tra** kết quả bằng cách cộng ngược

### CÁCH KIỂM TRA:
- **Cộng ngược**: Kết quả + số trừ = số bị trừ
- **Chuyển sang thập phân** để verify
- **Sử dụng máy tính** để kiểm tra

### CÁC TRƯỜNG HỢP ĐẶC BIỆT:
- **A - A = 0** (bất kỳ số nào)
- **A - 0 = A** (trừ 0)
- **0 - A** (cần mượn nhiều chữ số)

### PHƯƠNG PHÁP NHANH:
1. **Viết theo cột** từ phải sang trái
2. **Trừ từng chữ số** một
3. **Mượn K** khi cần thiết
4. **Kiểm tra** kết quả

### VÍ DỤ ỨNG DỤNG:
```cpp
// Phép trừ hệ cơ số K
string baseKSubtract(string a, string b, int base) {
    if (base < 2 || base > 36) return "Invalid base";
    
    // Đảm bảo độ dài bằng nhau
    int maxLen = max(a.length(), b.length());
    while (a.length() < maxLen) a = "0" + a;
    while (b.length() < maxLen) b = "0" + b;
    
    string result = "";
    int borrow = 0;
    
    // Trừ từ phải sang trái
    for (int i = maxLen - 1; i >= 0; i--) {
        int digitA = charToDecimal(a[i]);
        int digitB = charToDecimal(b[i]);
        
        // Trừ với mượn
        int diff = digitA - digitB - borrow;
        
        if (diff < 0) {
            diff += base;
            borrow = 1;
        } else {
            borrow = 0;
        }
        
        result = decimalToChar(diff) + result;
    }
    
    // Bỏ số 0 thừa ở đầu
    while (result.length() > 1 && result[0] == '0') {
        result = result.substr(1);
    }
    
    return result;
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: ALU operations
- **Assembly**: SUB instruction
- **Cryptography**: Modular arithmetic
- **Error correction**: Checksum calculations
- **Base conversion**: Number system conversions

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 2.4: Phép toán số học trên hệ cơ số K
