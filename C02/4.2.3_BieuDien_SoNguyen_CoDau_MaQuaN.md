# 4.2.3 BIỂU DIỄN SỐ NGUYÊN CÓ DẤU BẰNG MÃ QUÁ N

## Mô tả dạng bài tập
Biểu diễn số nguyên có dấu bằng phương pháp mã quá N (excess-N) và thực hiện các phép toán.

## Phương pháp giải

### Phương pháp 1: Chuyển đổi sang mã quá N
1. **Xác định dấu** của số
2. **Cộng N** vào số thập phân
3. **Chuyển kết quả** sang nhị phân
4. **Kiểm tra** phạm vi giá trị

### Phương pháp 2: Tính toán phạm vi
1. **Phạm vi**: -2^(n-1) đến 2^(n-1) - 1
2. **Số bit**: n bit
3. **Giá trị tối đa**: 2^(n-1) - 1
4. **Giá trị tối thiểu**: -2^(n-1)

## Bảng chuyển đổi mã quá N:
| Thập phân | Mã quá 8 | Mã quá 16 | Mã quá 32 | Ghi chú |
|-----------|----------|-----------|-----------|---------|
| -8        | 0000     | 0000      | 0000      | Tối thiểu |
| -7        | 0001     | 0001      | 0001      | Âm       |
| -6        | 0010     | 0010      | 0010      | Âm       |
| -5        | 0011     | 0011      | 0011      | Âm       |
| -4        | 0100     | 0100      | 0100      | Âm       |
| -3        | 0101     | 0101      | 0101      | Âm       |
| -2        | 0110     | 0110      | 0110      | Âm       |
| -1        | 0111     | 0111      | 0111      | Âm       |
| 0         | 1000     | 1000      | 1000      | Trung tính |
| 1         | 1001     | 1001      | 1001      | Dương    |
| 2         | 1010     | 1010      | 1010      | Dương    |
| 3         | 1011     | 1011      | 1011      | Dương    |
| 4         | 1100     | 1100      | 1100      | Dương    |
| 5         | 1101     | 1101      | 1101      | Dương    |
| 6         | 1110     | 1110      | 1110      | Dương    |
| 7         | 1111     | 1111      | 1111      | Tối đa   |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Biểu diễn số 5 bằng mã quá 8 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
5 > 0 → dấu dương

Bước 2: Cộng 8 vào số 5
5 + 8 = 13

Bước 3: Chuyển 13₁₀ sang nhị phân
13₁₀ = 1101₂

Bước 4: Kiểm tra phạm vi
4 bit: -8 ≤ 5 ≤ 7 ✓

Kết quả: 5₁₀ = 1101₂ (4 bit mã quá 8)
```

### Bài 2: Biểu diễn số -5 bằng mã quá 8 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-5 < 0 → dấu âm

Bước 2: Cộng 8 vào số -5
-5 + 8 = 3

Bước 3: Chuyển 3₁₀ sang nhị phân
3₁₀ = 0011₂

Bước 4: Kiểm tra phạm vi
4 bit: -8 ≤ -5 ≤ 7 ✓

Kết quả: -5₁₀ = 0011₂ (4 bit mã quá 8)
```

### Bài 3: Biểu diễn số 7 bằng mã quá 8 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
7 > 0 → dấu dương

Bước 2: Cộng 8 vào số 7
7 + 8 = 15

Bước 3: Chuyển 15₁₀ sang nhị phân
15₁₀ = 1111₂

Bước 4: Kiểm tra phạm vi
4 bit: -8 ≤ 7 ≤ 7 ✓

Kết quả: 7₁₀ = 1111₂ (4 bit mã quá 8)
```

### Bài 4: Biểu diễn số -7 bằng mã quá 8 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-7 < 0 → dấu âm

Bước 2: Cộng 8 vào số -7
-7 + 8 = 1

Bước 3: Chuyển 1₁₀ sang nhị phân
1₁₀ = 0001₂

Bước 4: Kiểm tra phạm vi
4 bit: -8 ≤ -7 ≤ 7 ✓

Kết quả: -7₁₀ = 0001₂ (4 bit mã quá 8)
```

### Bài 5: Biểu diễn số 25 bằng mã quá 128 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
25 > 0 → dấu dương

Bước 2: Cộng 128 vào số 25
25 + 128 = 153

Bước 3: Chuyển 153₁₀ sang nhị phân
153₁₀ = 10011001₂

Bước 4: Kiểm tra phạm vi
8 bit: -128 ≤ 25 ≤ 127 ✓

Kết quả: 25₁₀ = 10011001₂ (8 bit mã quá 128)
```

### Bài 6: Biểu diễn số -25 bằng mã quá 128 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-25 < 0 → dấu âm

Bước 2: Cộng 128 vào số -25
-25 + 128 = 103

Bước 3: Chuyển 103₁₀ sang nhị phân
103₁₀ = 01100111₂

Bước 4: Kiểm tra phạm vi
8 bit: -128 ≤ -25 ≤ 127 ✓

Kết quả: -25₁₀ = 01100111₂ (8 bit mã quá 128)
```

### Bài 7: Biểu diễn số 127 bằng mã quá 128 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
127 > 0 → dấu dương

Bước 2: Cộng 128 vào số 127
127 + 128 = 255

Bước 3: Chuyển 255₁₀ sang nhị phân
255₁₀ = 11111111₂

Bước 4: Kiểm tra phạm vi
8 bit: -128 ≤ 127 ≤ 127 ✓

Kết quả: 127₁₀ = 11111111₂ (8 bit mã quá 128)
```

### Bài 8: Biểu diễn số -127 bằng mã quá 128 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-127 < 0 → dấu âm

Bước 2: Cộng 128 vào số -127
-127 + 128 = 1

Bước 3: Chuyển 1₁₀ sang nhị phân
1₁₀ = 00000001₂

Bước 4: Kiểm tra phạm vi
8 bit: -128 ≤ -127 ≤ 127 ✓

Kết quả: -127₁₀ = 00000001₂ (8 bit mã quá 128)
```

### Bài 9: Biểu diễn số 1000 bằng mã quá 32768 trong 16 bit

**Lời giải:**
```
Bước 1: Xác định dấu
1000 > 0 → dấu dương

Bước 2: Cộng 32768 vào số 1000
1000 + 32768 = 33768

Bước 3: Chuyển 33768₁₀ sang nhị phân
33768₁₀ = 1000001111101000₂

Bước 4: Kiểm tra phạm vi
16 bit: -32768 ≤ 1000 ≤ 32767 ✓

Kết quả: 1000₁₀ = 1000001111101000₂ (16 bit mã quá 32768)
```

### Bài 10: Biểu diễn số -1000 bằng mã quá 32768 trong 16 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-1000 < 0 → dấu âm

Bước 2: Cộng 32768 vào số -1000
-1000 + 32768 = 31768

Bước 3: Chuyển 31768₁₀ sang nhị phân
31768₁₀ = 0111110000011000₂

Bước 4: Kiểm tra phạm vi
16 bit: -32768 ≤ -1000 ≤ 32767 ✓

Kết quả: -1000₁₀ = 0111110000011000₂ (16 bit mã quá 32768)
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Biểu diễn số 3 bằng mã quá 8 trong 4 bit
2. Biểu diễn số -3 bằng mã quá 8 trong 4 bit
3. Biểu diễn số 6 bằng mã quá 8 trong 4 bit
4. Biểu diễn số -6 bằng mã quá 8 trong 4 bit
5. Biểu diễn số 0 bằng mã quá 8 trong 4 bit
6. Biểu diễn số 50 bằng mã quá 128 trong 8 bit
7. Biểu diễn số -50 bằng mã quá 128 trong 8 bit
8. Biểu diễn số 100 bằng mã quá 128 trong 8 bit
9. Biểu diễn số -100 bằng mã quá 128 trong 8 bit
10. Biểu diễn số 0 bằng mã quá 128 trong 8 bit

### Cấp độ trung bình (11-15):
11. Biểu diễn số 1000 bằng mã quá 32768 trong 16 bit
12. Biểu diễn số -1000 bằng mã quá 32768 trong 16 bit
13. Biểu diễn số 5000 bằng mã quá 32768 trong 16 bit
14. Biểu diễn số -5000 bằng mã quá 32768 trong 16 bit
15. Biểu diễn số 0 bằng mã quá 32768 trong 16 bit

### Cấp độ nâng cao (16-20):
16. Biểu diễn số 1000000 bằng mã quá 2147483648 trong 32 bit
17. Biểu diễn số -1000000 bằng mã quá 2147483648 trong 32 bit
18. Biểu diễn số 5000000 bằng mã quá 2147483648 trong 32 bit
19. Biểu diễn số -5000000 bằng mã quá 2147483648 trong 32 bit
20. Biểu diễn số 0 bằng mã quá 2147483648 trong 32 bit

---

## MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Xác định dấu** trước
- **Cộng N** vào số thập phân
- **Chuyển kết quả** sang nhị phân
- **Kiểm tra phạm vi** trước khi chuyển đổi

### LƯU Ý QUAN TRỌNG:
- **N = 2^(n-1)** cho n bit
- **Phạm vi** không đối xứng
- **Số bit cố định** (không thay đổi)
- **Cộng N** cho tất cả số

### CÁCH KIỂM TRA:
- **Chuyển ngược** từ mã quá N về thập phân
- **Kiểm tra phạm vi** với số bit
- **Sử dụng máy tính** để verify

### CÁC SỐ ĐẶC BIỆT:
- **0**: có giá trị N trong mã quá N
- **2^(n-1) - 1**: có giá trị 2^n - 1 trong mã quá N
- **-2^(n-1)**: có giá trị 0 trong mã quá N

### PHƯƠNG PHÁP NHANH:
1. **Xác định dấu**
2. **Cộng N**
3. **Chuyển sang nhị phân**
4. **Kiểm tra phạm vi**

### VÍ DỤ ỨNG DỤNG:
```cpp
// Biểu diễn số nguyên có dấu bằng mã quá N
string excessN(int value, int bits) {
    int N = 1 << (bits - 1);
    if (value < -N || value > N - 1) {
        return "Error: Value out of range";
    }
    
    int excessValue = value + N;
    string binary = "";
    
    for (int i = bits - 1; i >= 0; i--) {
        binary += ((excessValue >> i) & 1) ? "1" : "0";
    }
    
    return binary;
}

// Chuyển từ mã quá N về số nguyên có dấu
int fromExcessN(string binary, int bits) {
    int N = 1 << (bits - 1);
    int excessValue = 0;
    
    for (int i = 0; i < bits; i++) {
        if (binary[i] == '1') {
            excessValue += (1 << (bits - 1 - i));
        }
    }
    
    return excessValue - N;
}

// Tính N cho số bit
int calculateN(int bits) {
    return 1 << (bits - 1);
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: Excess-N arithmetic
- **Assembly**: Excess-N operations
- **Memory addressing**: Address calculations
- **Counters**: Loop counters, array indices
- **Flags**: Boolean flags, status bits

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 4.2: Biểu diễn số nguyên có dấu bằng mã quá N
