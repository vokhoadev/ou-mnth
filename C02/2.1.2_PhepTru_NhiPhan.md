# 2.1.2 PHÉP TRỪ NHỊ PHÂN

## Mô tả dạng bài tập
Thực hiện phép trừ giữa hai số nhị phân bằng phương pháp trừ trực tiếp hoặc sử dụng bù 2.

## Phương pháp giải

### Phương pháp 1: Trừ trực tiếp
1. **Viết hai số nhị phân** theo cột
2. **Trừ từ phải sang trái**
3. **Mượn 1** từ bit bên trái khi cần thiết

### Phương pháp 2: Sử dụng bù 2
1. **Tìm bù 2** của số trừ
2. **Cộng** số bị trừ với bù 2 của số trừ
3. **Bỏ bit tràn** nếu có

## Bảng trừ nhị phân:
| A | B | A - B | Mượn |
|---|---|-------|------|
| 0 | 0 | 0     | 0    |
| 0 | 1 | 1     | 1    |
| 1 | 0 | 1     | 0    |
| 1 | 1 | 0     | 0    |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Tính 1011₂ - 101₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  1011₂
-  101₂
------
  0110₂

Chi tiết:
Vị trí 0: 1 - 1 = 0
Vị trí 1: 1 - 0 = 1  
Vị trí 2: 0 - 1 = 1 (mượn 1 từ vị trí 3)
Vị trí 3: 0 - 0 = 0

Kết quả: 1011₂ - 101₂ = 110₂
```

### Bài 2: Tính 1100₂ - 1011₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  1100₂
- 1011₂
------
  0001₂

Chi tiết:
Vị trí 0: 0 - 1 = 1 (mượn 1 từ vị trí 1)
Vị trí 1: 0 - 1 = 1 (mượn 1 từ vị trí 2)
Vị trí 2: 0 - 0 = 0
Vị trí 3: 1 - 1 = 0

Kết quả: 1100₂ - 1011₂ = 1₂
```

### Bài 3: Tính 1111₂ - 1001₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  1111₂
- 1001₂
------
  0110₂

Chi tiết:
Vị trí 0: 1 - 1 = 0
Vị trí 1: 1 - 0 = 1
Vị trí 2: 1 - 0 = 1
Vị trí 3: 1 - 1 = 0

Kết quả: 1111₂ - 1001₂ = 110₂
```

### Bài 4: Tính 10000₂ - 1111₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  10000₂
-  1111₂
-------
   0001₂

Chi tiết:
Vị trí 0: 0 - 1 = 1 (mượn 1 từ vị trí 1)
Vị trí 1: 0 - 1 = 1 (mượn 1 từ vị trí 2)
Vị trí 2: 0 - 1 = 1 (mượn 1 từ vị trí 3)
Vị trí 3: 0 - 1 = 1 (mượn 1 từ vị trí 4)
Vị trí 4: 0 - 0 = 0

Kết quả: 10000₂ - 1111₂ = 1₂
```

### Bài 5: Tính 1010₂ - 101₂ (sử dụng bù 2)

**Lời giải (Phương pháp bù 2):**
```
Bước 1: Tìm bù 2 của 101₂
101₂ → 010₂ (bù 1) → 011₂ (bù 2)

Bước 2: Cộng 1010₂ + 011₂
  1010₂
+  011₂
------
  1101₂

Bước 3: Bỏ bit tràn (bit đầu tiên)
Kết quả: 101₂

Kiểm tra: 10₁₀ - 5₁₀ = 5₁₀ = 101₂ ✓
```

### Bài 6: Tính 1101₂ - 1010₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  1101₂
- 1010₂
------
  0011₂

Chi tiết:
Vị trí 0: 1 - 0 = 1
Vị trí 1: 0 - 1 = 1 (mượn 1 từ vị trí 2)
Vị trí 2: 0 - 0 = 0
Vị trí 3: 1 - 1 = 0

Kết quả: 1101₂ - 1010₂ = 11₂
```

### Bài 7: Tính 1001₂ - 110₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  1001₂
-  110₂
------
  0011₂

Chi tiết:
Vị trí 0: 1 - 0 = 1
Vị trí 1: 0 - 1 = 1 (mượn 1 từ vị trí 2)
Vị trí 2: 0 - 1 = 1 (mượn 1 từ vị trí 3)
Vị trí 3: 0 - 0 = 0

Kết quả: 1001₂ - 110₂ = 11₂
```

### Bài 8: Tính 1110₂ - 1011₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  1110₂
- 1011₂
------
  0011₂

Chi tiết:
Vị trí 0: 0 - 1 = 1 (mượn 1 từ vị trí 1)
Vị trí 1: 0 - 1 = 1 (mượn 1 từ vị trí 2)
Vị trí 2: 1 - 0 = 1
Vị trí 3: 1 - 1 = 0

Kết quả: 1110₂ - 1011₂ = 11₂
```

### Bài 9: Tính 10101₂ - 1101₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  10101₂
-  1101₂
-------
   1000₂

Chi tiết:
Vị trí 0: 1 - 1 = 0
Vị trí 1: 0 - 0 = 0
Vị trí 2: 1 - 1 = 0
Vị trí 3: 0 - 1 = 1 (mượn 1 từ vị trí 4)
Vị trí 4: 0 - 0 = 0

Kết quả: 10101₂ - 1101₂ = 1000₂
```

### Bài 10: Tính 11011₂ - 10110₂

**Lời giải (Phương pháp trừ trực tiếp):**
```
  11011₂
- 10110₂
-------
   0101₂

Chi tiết:
Vị trí 0: 1 - 0 = 1
Vị trí 1: 1 - 1 = 0
Vị trí 2: 0 - 1 = 1 (mượn 1 từ vị trí 3)
Vị trí 3: 0 - 0 = 0
Vị trí 4: 1 - 1 = 0

Kết quả: 11011₂ - 10110₂ = 101₂
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Tính 110₂ - 10₂
2. Tính 1010₂ - 101₂
3. Tính 1111₂ - 1000₂
4. Tính 1001₂ - 110₂
5. Tính 1011₂ - 111₂
6. Tính 1100₂ - 1010₂
7. Tính 1110₂ - 1001₂
8. Tính 10000₂ - 1111₂
9. Tính 10101₂ - 1101₂
10. Tính 11011₂ - 10110₂

### Cấp độ trung bình (11-15):
11. Tính 11111₂ - 10101₂
12. Tính 100000₂ - 11111₂
13. Tính 101010₂ - 11011₂
14. Tính 110101₂ - 101011₂
15. Tính 111000₂ - 101101₂

### Cấp độ nâng cao (16-20):
16. Tính 1010101₂ - 110011₂ (sử dụng bù 2)
17. Tính 1101010₂ - 1011011₂ (sử dụng bù 2)
18. Tính 1111000₂ - 1010101₂ (sử dụng bù 2)
19. Tính 10000000₂ - 1111111₂ (sử dụng bù 2)
20. Tính 10101010₂ - 11001100₂ (sử dụng bù 2)

---

##  MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Trừ từ phải sang trái**
- **Mượn 1** từ bit bên trái khi cần
- **Sử dụng bù 2** cho số lớn
- **Kiểm tra** bằng cách cộng ngược lại

### LƯU Ý QUAN TRỌNG:
- **Mượn 1** = thêm 2 vào bit hiện tại
- **Bù 2** = bù 1 + 1
- **Bỏ bit tràn** khi sử dụng bù 2
- **Kiểm tra** kết quả bằng cách cộng ngược

### CÁCH KIỂM TRA:
- **Cộng ngược**: Kết quả + số trừ = số bị trừ
- **Chuyển sang thập phân** để verify
- **Sử dụng máy tính** để kiểm tra

### CÁC TRƯỜNG HỢP ĐẶC BIỆT:
- **A - A = 0** (bất kỳ số nào)
- **A - 0 = A** (trừ 0)
- **0 - A** (cần mượn nhiều bit)

### PHƯƠNG PHÁP NHANH:
1. **Viết theo cột** từ phải sang trái
2. **Trừ từng bit** một
3. **Mượn 1** khi cần thiết
4. **Kiểm tra** kết quả

### VÍ DỤ ỨNG DỤNG:
```cpp
// Phép trừ nhị phân
string binarySubtract(string a, string b) {
    // Đảm bảo độ dài bằng nhau
    int maxLen = max(a.length(), b.length());
    while (a.length() < maxLen) a = "0" + a;
    while (b.length() < maxLen) b = "0" + b;
    
    string result = "";
    int borrow = 0;
    
    // Trừ từ phải sang trái
    for (int i = maxLen - 1; i >= 0; i--) {
        int bitA = a[i] - '0';
        int bitB = b[i] - '0';
        
        // Trừ với mượn
        int diff = bitA - bitB - borrow;
        
        if (diff < 0) {
            diff += 2;
            borrow = 1;
        } else {
            borrow = 0;
        }
        
        result = to_string(diff) + result;
    }
    
    // Bỏ số 0 thừa ở đầu
    while (result.length() > 1 && result[0] == '0') {
        result = result.substr(1);
    }
    
    return result;
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: ALU operations
- **Assembly**: SUB instruction
- **Cryptography**: Modular arithmetic
- **Error detection**: Checksum calculations

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 2.1: Phép toán số học trên hệ nhị phân
