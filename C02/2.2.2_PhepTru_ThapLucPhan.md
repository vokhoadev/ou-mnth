# 2.2.2 PHÉP TRỪ THẬP LỤC PHÂN

## Mô tả dạng bài tập
Thực hiện phép trừ giữa hai số thập lục phân bằng phương pháp trừ trực tiếp hoặc sử dụng bù 16.

## Phương pháp giải

### Phương pháp 1: Trừ trực tiếp
1. **Viết hai số thập lục phân** theo cột
2. **Trừ từ phải sang trái**
3. **Mượn 16** từ chữ số bên trái khi cần thiết

### Phương pháp 2: Sử dụng bù 16
1. **Tìm bù 16** của số trừ
2. **Cộng** số bị trừ với bù 16 của số trừ
3. **Bỏ bit tràn** nếu có

## Bảng trừ thập lục phân:
| A | B | A - B | Mượn |
|---|---|-------|------|
| 0 | 0 | 0     | 0    |
| 0 | 1 | F     | 1    |
| 0 | 2 | E     | 1    |
| 0 | 3 | D     | 1    |
| 0 | 4 | C     | 1    |
| 0 | 5 | B     | 1    |
| 0 | 6 | A     | 1    |
| 0 | 7 | 9     | 1    |
| 0 | 8 | 8     | 1    |
| 0 | 9 | 7     | 1    |
| 0 | A | 6     | 1    |
| 0 | B | 5     | 1    |
| 0 | C | 4     | 1    |
| 0 | D | 3     | 1    |
| 0 | E | 2     | 1    |
| 0 | F | 1     | 1    |
| 1 | 0 | 1     | 0    |
| 1 | 1 | 0     | 0    |
| 1 | 2 | F     | 1    |
| 1 | 3 | E     | 1    |
| 1 | 4 | D     | 1    |
| 1 | 5 | C     | 1    |
| 1 | 6 | B     | 1    |
| 1 | 7 | A     | 1    |
| 1 | 8 | 9     | 1    |
| 1 | 9 | 8     | 1    |
| 1 | A | 7     | 1    |
| 1 | B | 6     | 1    |
| 1 | C | 5     | 1    |
| 1 | D | 4     | 1    |
| 1 | E | 3     | 1    |
| 1 | F | 2     | 1    |
| 2 | 0 | 2     | 0    |
| 2 | 1 | 1     | 0    |
| 2 | 2 | 0     | 0    |
| 2 | 3 | F     | 1    |
| 2 | 4 | E     | 1    |
| 2 | 5 | D     | 1    |
| 2 | 6 | C     | 1    |
| 2 | 7 | B     | 1    |
| 2 | 8 | A     | 1    |
| 2 | 9 | 9     | 1    |
| 2 | A | 8     | 1    |
| 2 | B | 7     | 1    |
| 2 | C | 6     | 1    |
| 2 | D | 5     | 1    |
| 2 | E | 4     | 1    |
| 2 | F | 3     | 1    |
| 3 | 0 | 3     | 0    |
| 3 | 1 | 2     | 0    |
| 3 | 2 | 1     | 0    |
| 3 | 3 | 0     | 0    |
| 3 | 4 | F     | 1    |
| 3 | 5 | E     | 1    |
| 3 | 6 | D     | 1    |
| 3 | 7 | C     | 1    |
| 3 | 8 | B     | 1    |
| 3 | 9 | A     | 1    |
| 3 | A | 9     | 1    |
| 3 | B | 8     | 1    |
| 3 | C | 7     | 1    |
| 3 | D | 6     | 1    |
| 3 | E | 5     | 1    |
| 3 | F | 4     | 1    |
| 4 | 0 | 4     | 0    |
| 4 | 1 | 3     | 0    |
| 4 | 2 | 2     | 0    |
| 4 | 3 | 1     | 0    |
| 4 | 4 | 0     | 0    |
| 4 | 5 | F     | 1    |
| 4 | 6 | E     | 1    |
| 4 | 7 | D     | 1    |
| 4 | 8 | C     | 1    |
| 4 | 9 | B     | 1    |
| 4 | A | A     | 1    |
| 4 | B | 9     | 1    |
| 4 | C | 8     | 1    |
| 4 | D | 7     | 1    |
| 4 | E | 6     | 1    |
| 4 | F | 5     | 1    |
| 5 | 0 | 5     | 0    |
| 5 | 1 | 4     | 0    |
| 5 | 2 | 3     | 0    |
| 5 | 3 | 2     | 0    |
| 5 | 4 | 1     | 0    |
| 5 | 5 | 0     | 0    |
| 5 | 6 | F     | 1    |
| 5 | 7 | E     | 1    |
| 5 | 8 | D     | 1    |
| 5 | 9 | C     | 1    |
| 5 | A | B     | 1    |
| 5 | B | A     | 1    |
| 5 | C | 9     | 1    |
| 5 | D | 8     | 1    |
| 5 | E | 7     | 1    |
| 5 | F | 6     | 1    |
| 6 | 0 | 6     | 0    |
| 6 | 1 | 5     | 0    |
| 6 | 2 | 4     | 0    |
| 6 | 3 | 3     | 0    |
| 6 | 4 | 2     | 0    |
| 6 | 5 | 1     | 0    |
| 6 | 6 | 0     | 0    |
| 6 | 7 | F     | 1    |
| 6 | 8 | E     | 1    |
| 6 | 9 | D     | 1    |
| 6 | A | C     | 1    |
| 6 | B | B     | 1    |
| 6 | C | A     | 1    |
| 6 | D | 9     | 1    |
| 6 | E | 8     | 1    |
| 6 | F | 7     | 1    |
| 7 | 0 | 7     | 0    |
| 7 | 1 | 6     | 0    |
| 7 | 2 | 5     | 0    |
| 7 | 3 | 4     | 0    |
| 7 | 4 | 3     | 0    |
| 7 | 5 | 2     | 0    |
| 7 | 6 | 1     | 0    |
| 7 | 7 | 0     | 0    |
| 7 | 8 | F     | 1    |
| 7 | 9 | E     | 1    |
| 7 | A | D     | 1    |
| 7 | B | C     | 1    |
| 7 | C | B     | 1    |
| 7 | D | A     | 1    |
| 7 | E | 9     | 1    |
| 7 | F | 8     | 1    |
| 8 | 0 | 8     | 0    |
| 8 | 1 | 7     | 0    |
| 8 | 2 | 6     | 0    |
| 8 | 3 | 5     | 0    |
| 8 | 4 | 4     | 0    |
| 8 | 5 | 3     | 0    |
| 8 | 6 | 2     | 0    |
| 8 | 7 | 1     | 0    |
| 8 | 8 | 0     | 0    |
| 8 | 9 | F     | 1    |
| 8 | A | E     | 1    |
| 8 | B | D     | 1    |
| 8 | C | C     | 1    |
| 8 | D | B     | 1    |
| 8 | E | A     | 1    |
| 8 | F | 9     | 1    |
| 9 | 0 | 9     | 0    |
| 9 | 1 | 8     | 0    |
| 9 | 2 | 7     | 0    |
| 9 | 3 | 6     | 0    |
| 9 | 4 | 5     | 0    |
| 9 | 5 | 4     | 0    |
| 9 | 6 | 3     | 0    |
| 9 | 7 | 2     | 0    |
| 9 | 8 | 1     | 0    |
| 9 | 9 | 0     | 0    |
| 9 | A | F     | 1    |
| 9 | B | E     | 1    |
| 9 | C | D     | 1    |
| 9 | D | C     | 1    |
| 9 | E | B     | 1    |
| 9 | F | A     | 1    |
| A | 0 | A     | 0    |
| A | 1 | 9     | 0    |
| A | 2 | 8     | 0    |
| A | 3 | 7     | 0    |
| A | 4 | 6     | 0    |
| A | 5 | 5     | 0    |
| A | 6 | 4     | 0    |
| A | 7 | 3     | 0    |
| A | 8 | 2     | 0    |
| A | 9 | 1     | 0    |
| A | A | 0     | 0    |
| A | B | F     | 1    |
| A | C | E     | 1    |
| A | D | D     | 1    |
| A | E | C     | 1    |
| A | F | B     | 1    |
| B | 0 | B     | 0    |
| B | 1 | A     | 0    |
| B | 2 | 9     | 0    |
| B | 3 | 8     | 0    |
| B | 4 | 7     | 0    |
| B | 5 | 6     | 0    |
| B | 6 | 5     | 0    |
| B | 7 | 4     | 0    |
| B | 8 | 3     | 0    |
| B | 9 | 2     | 0    |
| B | A | 1     | 0    |
| B | B | 0     | 0    |
| B | C | F     | 1    |
| B | D | E     | 1    |
| B | E | D     | 1    |
| B | F | C     | 1    |
| C | 0 | C     | 0    |
| C | 1 | B     | 0    |
| C | 2 | A     | 0    |
| C | 3 | 9     | 0    |
| C | 4 | 8     | 0    |
| C | 5 | 7     | 0    |
| C | 6 | 6     | 0    |
| C | 7 | 5     | 0    |
| C | 8 | 4     | 0    |
| C | 9 | 3     | 0    |
| C | A | 2     | 0    |
| C | B | 1     | 0    |
| C | C | 0     | 0    |
| C | D | F     | 1    |
| C | E | E     | 1    |
| C | F | D     | 1    |
| D | 0 | D     | 0    |
| D | 1 | C     | 0    |
| D | 2 | B     | 0    |
| D | 3 | A     | 0    |
| D | 4 | 9     | 0    |
| D | 5 | 8     | 0    |
| D | 6 | 7     | 0    |
| D | 7 | 6     | 0    |
| D | 8 | 5     | 0    |
| D | 9 | 4     | 0    |
| D | A | 3     | 0    |
| D | B | 2     | 0    |
| D | C | 1     | 0    |
| D | D | 0     | 0    |
| D | E | F     | 1    |
| D | F | E     | 1    |
| E | 0 | E     | 0    |
| E | 1 | D     | 0    |
| E | 2 | C     | 0    |
| E | 3 | B     | 0    |
| E | 4 | A     | 0    |
| E | 5 | 9     | 0    |
| E | 6 | 8     | 0    |
| E | 7 | 7     | 0    |
| E | 8 | 6     | 0    |
| E | 9 | 5     | 0    |
| E | A | 4     | 0    |
| E | B | 3     | 0    |
| E | C | 2     | 0    |
| E | D | 1     | 0    |
| E | E | 0     | 0    |
| E | F | F     | 1    |
| F | 0 | F     | 0    |
| F | 1 | E     | 0    |
| F | 2 | D     | 0    |
| F | 3 | C     | 0    |
| F | 4 | B     | 0    |
| F | 5 | A     | 0    |
| F | 6 | 9     | 0    |
| F | 7 | 8     | 0    |
| F | 8 | 7     | 0    |
| F | 9 | 6     | 0    |
| F | A | 5     | 0    |
| F | B | 4     | 0    |
| F | C | 3     | 0    |
| F | D | 2     | 0    |
| F | E | 1     | 0    |
| F | F | 0     | 0    |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Tính 2A₁₆ - 1B₁₆

**Lời giải:**
```
  2A₁₆
- 1B₁₆
-----
   F₁₆

Chi tiết:
Vị trí 0: A - B = 10 - 11 = F (mượn 16 từ vị trí 1)
Vị trí 1: 1 - 1 = 0

Kết quả: 2A₁₆ - 1B₁₆ = F₁₆
```

### Bài 2: Tính 4C₁₆ - 2D₁₆

**Lời giải:**
```
  4C₁₆
- 2D₁₆
-----
  1F₁₆

Chi tiết:
Vị trí 0: C - D = 12 - 13 = F (mượn 16 từ vị trí 1)
Vị trí 1: 3 - 2 = 1 (sau khi mượn)

Kết quả: 4C₁₆ - 2D₁₆ = 1F₁₆
```

### Bài 3: Tính 6E₁₆ - 3F₁₆

**Lời giải:**
```
  6E₁₆
- 3F₁₆
-----
  2F₁₆

Chi tiết:
Vị trí 0: E - F = 14 - 15 = F (mượn 16 từ vị trí 1)
Vị trí 1: 5 - 3 = 2 (sau khi mượn)

Kết quả: 6E₁₆ - 3F₁₆ = 2F₁₆
```

### Bài 4: Tính 8A₁₆ - 5B₁₆

**Lời giải:**
```
  8A₁₆
- 5B₁₆
-----
  2F₁₆

Chi tiết:
Vị trí 0: A - B = 10 - 11 = F (mượn 16 từ vị trí 1)
Vị trí 1: 7 - 5 = 2 (sau khi mượn)

Kết quả: 8A₁₆ - 5B₁₆ = 2F₁₆
```

### Bài 5: Tính AC₁₆ - 7D₁₆

**Lời giải:**
```
  AC₁₆
- 7D₁₆
-----
  2F₁₆

Chi tiết:
Vị trí 0: C - D = 12 - 13 = F (mượn 16 từ vị trí 1)
Vị trí 1: A - 7 = 10 - 7 = 3 (sau khi mượn)

Kết quả: AC₁₆ - 7D₁₆ = 2F₁₆
```

### Bài 6: Tính CE₁₆ - 9F₁₆

**Lời giải:**
```
  CE₁₆
- 9F₁₆
-----
  2F₁₆

Chi tiết:
Vị trí 0: E - F = 14 - 15 = F (mượn 16 từ vị trí 1)
Vị trí 1: C - 9 = 12 - 9 = 3 (sau khi mượn)

Kết quả: CE₁₆ - 9F₁₆ = 2F₁₆
```

### Bài 7: Tính 123₁₆ - 45₁₆

**Lời giải:**
```
  123₁₆
-  45₁₆
-----
   DE₁₆

Chi tiết:
Vị trí 0: 3 - 5 = E (mượn 16 từ vị trí 1)
Vị trí 1: 1 - 4 = D (sau khi mượn)
Vị trí 2: 1 - 0 = 1

Kết quả: 123₁₆ - 45₁₆ = DE₁₆
```

### Bài 8: Tính 456₁₆ - 234₁₆

**Lời giải:**
```
  456₁₆
- 234₁₆
-----
  222₁₆

Chi tiết:
Vị trí 0: 6 - 4 = 2
Vị trí 1: 5 - 3 = 2
Vị trí 2: 4 - 2 = 2

Kết quả: 456₁₆ - 234₁₆ = 222₁₆
```

### Bài 9: Tính 789₁₆ - 456₁₆

**Lời giải:**
```
  789₁₆
- 456₁₆
-----
  333₁₆

Chi tiết:
Vị trí 0: 9 - 6 = 3
Vị trí 1: 8 - 5 = 3
Vị trí 2: 7 - 4 = 3

Kết quả: 789₁₆ - 456₁₆ = 333₁₆
```

### Bài 10: Tính ABC₁₆ - 789₁₆

**Lời giải:**
```
  ABC₁₆
- 789₁₆
-----
  333₁₆

Chi tiết:
Vị trí 0: C - 9 = 12 - 9 = 3
Vị trí 1: B - 8 = 11 - 8 = 3
Vị trí 2: A - 7 = 10 - 7 = 3

Kết quả: ABC₁₆ - 789₁₆ = 333₁₆
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Tính 1A₁₆ - 0B₁₆
2. Tính 2B₁₆ - 1C₁₆
3. Tính 3C₁₆ - 2D₁₆
4. Tính 4D₁₆ - 3E₁₆
5. Tính 5E₁₆ - 4F₁₆
6. Tính 6F₁₆ - 50₁₆
7. Tính 70₁₆ - 61₁₆
8. Tính 81₁₆ - 72₁₆
9. Tính 92₁₆ - 83₁₆
10. Tính A3₁₆ - 94₁₆

### Cấp độ trung bình (11-15):
11. Tính B4₁₆ - A5₁₆
12. Tính C5₁₆ - B6₁₆
13. Tính D6₁₆ - C7₁₆
14. Tính E7₁₆ - D8₁₆
15. Tính F8₁₆ - E9₁₆

### Cấp độ nâng cao (16-20):
16. Tính 1234₁₆ - 567₁₆
17. Tính 2345₁₆ - 678₁₆
18. Tính 3456₁₆ - 789₁₆
19. Tính 4567₁₆ - 890₁₆
20. Tính 5678₁₆ - 901₁₆

---

## MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Trừ từ phải sang trái**
- **Mượn 16** từ chữ số bên trái khi cần
- **Sử dụng bù 16** cho số lớn
- **Kiểm tra** bằng cách cộng ngược lại

### LƯU Ý QUAN TRỌNG:
- **Mượn 16** = thêm 16 vào chữ số hiện tại
- **Bù 16** = bù 15 + 1
- **Bỏ bit tràn** khi sử dụng bù 16
- **Kiểm tra** kết quả bằng cách cộng ngược

### CÁCH KIỂM TRA:
- **Cộng ngược**: Kết quả + số trừ = số bị trừ
- **Chuyển sang thập phân** để verify
- **Sử dụng máy tính** để kiểm tra

### CÁC TRƯỜNG HỢP ĐẶC BIỆT:
- **A - A = 0** (bất kỳ số nào)
- **A - 0 = A** (trừ 0)
- **0 - A** (cần mượn nhiều chữ số)

### PHƯƠNG PHÁP NHANH:
1. **Viết theo cột** từ phải sang trái
2. **Trừ từng chữ số** một
3. **Mượn 16** khi cần thiết
4. **Kiểm tra** kết quả

### VÍ DỤ ỨNG DỤNG:
```cpp
// Phép trừ thập lục phân
string hexSubtract(string a, string b) {
    // Đảm bảo độ dài bằng nhau
    int maxLen = max(a.length(), b.length());
    while (a.length() < maxLen) a = "0" + a;
    while (b.length() < maxLen) b = "0" + b;
    
    string result = "";
    int borrow = 0;
    
    // Trừ từ phải sang trái
    for (int i = maxLen - 1; i >= 0; i--) {
        int digitA = hexToDecimal(a[i]);
        int digitB = hexToDecimal(b[i]);
        
        // Trừ với mượn
        int diff = digitA - digitB - borrow;
        
        if (diff < 0) {
            diff += 16;
            borrow = 1;
        } else {
            borrow = 0;
        }
        
        result = decimalToHex(diff) + result;
    }
    
    // Bỏ số 0 thừa ở đầu
    while (result.length() > 1 && result[0] == '0') {
        result = result.substr(1);
    }
    
    return result;
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: ALU operations
- **Assembly**: SUB instruction
- **Color codes**: RGB values
- **Memory addressing**: Pointer arithmetic

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 2.3: Phép toán số học trên hệ thập lục phân
