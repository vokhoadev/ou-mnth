# 4.2.2 BIỂU DIỄN SỐ NGUYÊN CÓ DẤU BẰNG BÙ 2

## Mô tả dạng bài tập
Biểu diễn số nguyên có dấu bằng phương pháp bù 2 (two's complement) và thực hiện các phép toán.

## Phương pháp giải

### Phương pháp 1: Chuyển đổi sang bù 2
1. **Xác định dấu** của số
2. **Chuyển số thập phân** sang nhị phân
3. **Thêm bit dấu** (0=dương, 1=âm)
4. **Đảo bit và cộng 1** nếu số âm (bù 2)

### Phương pháp 2: Tính toán phạm vi
1. **Phạm vi**: -2^(n-1) đến 2^(n-1) - 1
2. **Số bit**: n bit
3. **Giá trị tối đa**: 2^(n-1) - 1
4. **Giá trị tối thiểu**: -2^(n-1)

## Bảng chuyển đổi bù 2:
| Thập phân | Nhị phân | Bù 2 | Ghi chú |
|-----------|----------|------|---------|
| 0         | 0000     | 0000 | Dương   |
| 1         | 0001     | 0001 | Dương   |
| 2         | 0010     | 0010 | Dương   |
| 3         | 0011     | 0011 | Dương   |
| 4         | 0100     | 0100 | Dương   |
| 5         | 0101     | 0101 | Dương   |
| 6         | 0110     | 0110 | Dương   |
| 7         | 0111     | 0111 | Dương   |
| -8        | 1000     | 1000 | Âm (đặc biệt) |
| -7        | 1001     | 1001 | Âm       |
| -6        | 1010     | 1010 | Âm       |
| -5        | 1011     | 1011 | Âm       |
| -4        | 1100     | 1100 | Âm       |
| -3        | 1101     | 1101 | Âm       |
| -2        | 1110     | 1110 | Âm       |
| -1        | 1111     | 1111 | Âm       |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Biểu diễn số 5 bằng bù 2 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
5 > 0 → dấu dương

Bước 2: Chuyển 5₁₀ sang nhị phân
5₁₀ = 101₂

Bước 3: Thêm bit dấu (0=dương)
0101₂

Bước 4: Kiểm tra phạm vi
4 bit: -8 ≤ 5 ≤ 7 ✓

Kết quả: 5₁₀ = 0101₂ (4 bit bù 2)
```

### Bài 2: Biểu diễn số -5 bằng bù 2 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-5 < 0 → dấu âm

Bước 2: Chuyển 5₁₀ sang nhị phân
5₁₀ = 101₂

Bước 3: Thêm bit dấu (1=âm)
1101₂

Bước 4: Đảo bit và cộng 1 (bù 2)
1101₂ → 0010₂ + 1 = 0011₂

Bước 5: Kiểm tra phạm vi
4 bit: -8 ≤ -5 ≤ 7 ✓

Kết quả: -5₁₀ = 1011₂ (4 bit bù 2)
```

### Bài 3: Biểu diễn số 7 bằng bù 2 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
7 > 0 → dấu dương

Bước 2: Chuyển 7₁₀ sang nhị phân
7₁₀ = 111₂

Bước 3: Thêm bit dấu (0=dương)
0111₂

Bước 4: Kiểm tra phạm vi
4 bit: -8 ≤ 7 ≤ 7 ✓

Kết quả: 7₁₀ = 0111₂ (4 bit bù 2)
```

### Bài 4: Biểu diễn số -7 bằng bù 2 trong 4 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-7 < 0 → dấu âm

Bước 2: Chuyển 7₁₀ sang nhị phân
7₁₀ = 111₂

Bước 3: Thêm bit dấu (1=âm)
1111₂

Bước 4: Đảo bit và cộng 1 (bù 2)
1111₂ → 0000₂ + 1 = 0001₂

Bước 5: Kiểm tra phạm vi
4 bit: -8 ≤ -7 ≤ 7 ✓

Kết quả: -7₁₀ = 1001₂ (4 bit bù 2)
```

### Bài 5: Biểu diễn số 25 bằng bù 2 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
25 > 0 → dấu dương

Bước 2: Chuyển 25₁₀ sang nhị phân
25₁₀ = 11001₂

Bước 3: Thêm bit dấu (0=dương)
00011001₂

Bước 4: Kiểm tra phạm vi
8 bit: -128 ≤ 25 ≤ 127 ✓

Kết quả: 25₁₀ = 00011001₂ (8 bit bù 2)
```

### Bài 6: Biểu diễn số -25 bằng bù 2 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-25 < 0 → dấu âm

Bước 2: Chuyển 25₁₀ sang nhị phân
25₁₀ = 11001₂

Bước 3: Thêm bit dấu (1=âm)
10011001₂

Bước 4: Đảo bit và cộng 1 (bù 2)
10011001₂ → 01100110₂ + 1 = 01100111₂

Bước 5: Kiểm tra phạm vi
8 bit: -128 ≤ -25 ≤ 127 ✓

Kết quả: -25₁₀ = 11100111₂ (8 bit bù 2)
```

### Bài 7: Biểu diễn số 127 bằng bù 2 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
127 > 0 → dấu dương

Bước 2: Chuyển 127₁₀ sang nhị phân
127₁₀ = 1111111₂

Bước 3: Thêm bit dấu (0=dương)
01111111₂

Bước 4: Kiểm tra phạm vi
8 bit: -128 ≤ 127 ≤ 127 ✓

Kết quả: 127₁₀ = 01111111₂ (8 bit bù 2)
```

### Bài 8: Biểu diễn số -127 bằng bù 2 trong 8 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-127 < 0 → dấu âm

Bước 2: Chuyển 127₁₀ sang nhị phân
127₁₀ = 1111111₂

Bước 3: Thêm bit dấu (1=âm)
11111111₂

Bước 4: Đảo bit và cộng 1 (bù 2)
11111111₂ → 00000000₂ + 1 = 00000001₂

Bước 5: Kiểm tra phạm vi
8 bit: -128 ≤ -127 ≤ 127 ✓

Kết quả: -127₁₀ = 10000001₂ (8 bit bù 2)
```

### Bài 9: Biểu diễn số 1000 bằng bù 2 trong 16 bit

**Lời giải:**
```
Bước 1: Xác định dấu
1000 > 0 → dấu dương

Bước 2: Chuyển 1000₁₀ sang nhị phân
1000₁₀ = 1111101000₂

Bước 3: Thêm bit dấu (0=dương)
0000001111101000₂

Bước 4: Kiểm tra phạm vi
16 bit: -32768 ≤ 1000 ≤ 32767 ✓

Kết quả: 1000₁₀ = 0000001111101000₂ (16 bit bù 2)
```

### Bài 10: Biểu diễn số -1000 bằng bù 2 trong 16 bit

**Lời giải:**
```
Bước 1: Xác định dấu
-1000 < 0 → dấu âm

Bước 2: Chuyển 1000₁₀ sang nhị phân
1000₁₀ = 1111101000₂

Bước 3: Thêm bit dấu (1=âm)
1000001111101000₂

Bước 4: Đảo bit và cộng 1 (bù 2)
1000001111101000₂ → 0111110000010111₂ + 1 = 0111110000011000₂

Bước 5: Kiểm tra phạm vi
16 bit: -32768 ≤ -1000 ≤ 32767 ✓

Kết quả: -1000₁₀ = 1111110000011000₂ (16 bit bù 2)
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Biểu diễn số 3 bằng bù 2 trong 4 bit
2. Biểu diễn số -3 bằng bù 2 trong 4 bit
3. Biểu diễn số 6 bằng bù 2 trong 4 bit
4. Biểu diễn số -6 bằng bù 2 trong 4 bit
5. Biểu diễn số 0 bằng bù 2 trong 4 bit
6. Biểu diễn số 50 bằng bù 2 trong 8 bit
7. Biểu diễn số -50 bằng bù 2 trong 8 bit
8. Biểu diễn số 100 bằng bù 2 trong 8 bit
9. Biểu diễn số -100 bằng bù 2 trong 8 bit
10. Biểu diễn số 0 bằng bù 2 trong 8 bit

### Cấp độ trung bình (11-15):
11. Biểu diễn số 1000 bằng bù 2 trong 16 bit
12. Biểu diễn số -1000 bằng bù 2 trong 16 bit
13. Biểu diễn số 5000 bằng bù 2 trong 16 bit
14. Biểu diễn số -5000 bằng bù 2 trong 16 bit
15. Biểu diễn số 0 bằng bù 2 trong 16 bit

### Cấp độ nâng cao (16-20):
16. Biểu diễn số 1000000 bằng bù 2 trong 32 bit
17. Biểu diễn số -1000000 bằng bù 2 trong 32 bit
18. Biểu diễn số 5000000 bằng bù 2 trong 32 bit
19. Biểu diễn số -5000000 bằng bù 2 trong 32 bit
20. Biểu diễn số 0 bằng bù 2 trong 32 bit

---

##  MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Xác định dấu** trước
- **Chuyển sang nhị phân** trước
- **Thêm bit dấu** (0=dương, 1=âm)
- **Đảo bit và cộng 1** nếu số âm (bù 2)

### LƯU Ý QUAN TRỌNG:
- **Bit dấu** ở vị trí đầu tiên
- **Phạm vi** không đối xứng
- **Số bit cố định** (không thay đổi)
- **Đảo bit và cộng 1** cho số âm

### CÁCH KIỂM TRA:
- **Chuyển ngược** từ bù 2 về thập phân
- **Kiểm tra phạm vi** với số bit
- **Sử dụng máy tính** để verify

### CÁC SỐ ĐẶC BIỆT:
- **0**: chỉ có một biểu diễn (0000)
- **2^(n-1) - 1**: bit dấu = 0, còn lại = 1
- **-2^(n-1)**: bit dấu = 1, còn lại = 0

### PHƯƠNG PHÁP NHANH:
1. **Xác định dấu**
2. **Chuyển sang nhị phân**
3. **Thêm bit dấu**
4. **Đảo bit và cộng 1** nếu âm

### VÍ DỤ ỨNG DỤNG:
```cpp
// Biểu diễn số nguyên có dấu bằng bù 2
string twosComplement(int value, int bits) {
    if (value < -(1 << (bits - 1)) || value > (1 << (bits - 1)) - 1) {
        return "Error: Value out of range";
    }
    
    string binary = "";
    if (value >= 0) {
        // Số dương: bit dấu = 0
        binary = "0";
        for (int i = bits - 2; i >= 0; i--) {
            binary += ((value >> i) & 1) ? "1" : "0";
        }
    } else {
        // Số âm: bit dấu = 1, đảo bit và cộng 1
        binary = "1";
        int absValue = abs(value);
        for (int i = bits - 2; i >= 0; i--) {
            binary += ((absValue >> i) & 1) ? "0" : "1";
        }
        
        // Cộng 1
        int carry = 1;
        for (int i = bits - 1; i >= 0 && carry; i--) {
            if (binary[i] == '0') {
                binary[i] = '1';
                carry = 0;
            } else {
                binary[i] = '0';
            }
        }
    }
    
    return binary;
}

// Chuyển từ bù 2 về số nguyên có dấu
int fromTwosComplement(string binary) {
    int bits = binary.length();
    int value = 0;
    
    if (binary[0] == '0') {
        // Số dương
        for (int i = 1; i < bits; i++) {
            if (binary[i] == '1') {
                value += (1 << (bits - 1 - i));
            }
        }
    } else {
        // Số âm: đảo bit và cộng 1
        for (int i = 1; i < bits; i++) {
            if (binary[i] == '0') {
                value += (1 << (bits - 1 - i));
            }
        }
        value = -(value + 1);
    }
    
    return value;
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: Two's complement arithmetic
- **Assembly**: Two's complement operations
- **Memory addressing**: Address calculations
- **Counters**: Loop counters, array indices
- **Flags**: Boolean flags, status bits

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 4.2: Biểu diễn số nguyên có dấu bằng bù 2
