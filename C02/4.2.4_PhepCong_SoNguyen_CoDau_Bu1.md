# 4.2.4 PHÉP CỘNG SỐ NGUYÊN CÓ DẤU BẰNG BÙ 1

## Mô tả dạng bài tập
Thực hiện phép cộng giữa hai số nguyên có dấu biểu diễn bằng bù 1 và xử lý tràn số (overflow).

## Phương pháp giải

### Phương pháp 1: Cộng trực tiếp
1. **Cộng hai số** như bình thường
2. **Kiểm tra tràn số** (overflow)
3. **Xử lý kết quả** theo yêu cầu

### Phương pháp 2: Xử lý tràn số
1. **Tràn số**: kết quả > 2^(n-1) - 1 hoặc < -2^(n-1) + 1
2. **Kết quả thực tế**: kết quả mod 2^n
3. **Carry flag**: bit tràn (nếu có)

## Bảng tràn số bù 1:
| Số bit | Phạm vi | Tràn khi |
|--------|---------|----------|
| 4      | -7 đến 7 | > 7 hoặc < -7 |
| 8      | -127 đến 127 | > 127 hoặc < -127 |
| 16     | -32767 đến 32767 | > 32767 hoặc < -32767 |
| 32     | -2147483647 đến 2147483647 | > 2147483647 hoặc < -2147483647 |

---

## BÀI TẬP CÓ LỜI GIẢI CHI TIẾT (10 bài)

### Bài 1: Cộng 5 + 3 bằng bù 1 trong 4 bit

**Lời giải:**
```
  0101₂ (5₁₀)
+ 0011₂ (3₁₀)
-------
  1000₂ (8₁₀)

Kiểm tra tràn:
5 + 3 = 8 > 7 (2^(4-1) - 1) ✗
Có tràn số

Kết quả thực tế: 8 mod 16 = 8
Kết quả: 5 + 3 = 8 (4 bit bù 1, có tràn)
```

### Bài 2: Cộng 3 + 2 bằng bù 1 trong 4 bit

**Lời giải:**
```
  0011₂ (3₁₀)
+ 0010₂ (2₁₀)
-------
  0101₂ (5₁₀)

Kiểm tra tràn:
3 + 2 = 5 ≤ 7 (2^(4-1) - 1) ✓
Không tràn số

Kết quả: 3 + 2 = 5 (4 bit bù 1)
```

### Bài 3: Cộng -5 + (-3) bằng bù 1 trong 4 bit

**Lời giải:**
```
  1010₂ (-5₁₀)
+ 1100₂ (-3₁₀)
-------
 10110₂ (-8₁₀)

Kiểm tra tràn:
-5 + (-3) = -8 < -7 (2^(4-1) - 1) ✗
Có tràn số

Kết quả thực tế: -8 + 16 = 8
Kết quả: -5 + (-3) = 8 (4 bit bù 1, có tràn)
```

### Bài 4: Cộng -6 + (-1) bằng bù 1 trong 4 bit

**Lời giải:**
```
  1001₂ (-6₁₀)
+ 1110₂ (-1₁₀)
-------
 10111₂ (-7₁₀)

Kiểm tra tràn:
-6 + (-1) = -7 ≥ -7 (2^(4-1) - 1) ✓
Không tràn số

Kết quả: -6 + (-1) = -7 (4 bit bù 1)
```

### Bài 5: Cộng 100 + 50 bằng bù 1 trong 8 bit

**Lời giải:**
```
  01100100₂ (100₁₀)
+ 00110010₂ (50₁₀)
-------
  10010110₂ (150₁₀)

Kiểm tra tràn:
100 + 50 = 150 > 127 (2^(8-1) - 1) ✗
Có tràn số

Kết quả thực tế: 150 mod 256 = 150
Kết quả: 100 + 50 = 150 (8 bit bù 1, có tràn)
```

### Bài 6: Cộng 50 + 30 bằng bù 1 trong 8 bit

**Lời giải:**
```
  00110010₂ (50₁₀)
+ 00011110₂ (30₁₀)
-------
  01010000₂ (80₁₀)

Kiểm tra tràn:
50 + 30 = 80 ≤ 127 (2^(8-1) - 1) ✓
Không tràn số

Kết quả: 50 + 30 = 80 (8 bit bù 1)
```

### Bài 7: Cộng -100 + (-50) bằng bù 1 trong 8 bit

**Lời giải:**
```
  10011011₂ (-100₁₀)
+ 11001101₂ (-50₁₀)
-------
 101101000₂ (-150₁₀)

Kiểm tra tràn:
-100 + (-50) = -150 < -127 (2^(8-1) - 1) ✗
Có tràn số

Kết quả thực tế: -150 + 256 = 106
Kết quả: -100 + (-50) = 106 (8 bit bù 1, có tràn)
```

### Bài 8: Cộng -50 + (-30) bằng bù 1 trong 8 bit

**Lời giải:**
```
  11001101₂ (-50₁₀)
+ 11100001₂ (-30₁₀)
-------
 110101110₂ (-80₁₀)

Kiểm tra tràn:
-50 + (-30) = -80 ≥ -127 (2^(8-1) - 1) ✓
Không tràn số

Kết quả: -50 + (-30) = -80 (8 bit bù 1)
```

### Bài 9: Cộng 1000 + 2000 bằng bù 1 trong 16 bit

**Lời giải:**
```
  0000001111101000₂ (1000₁₀)
+ 0000011111010000₂ (2000₁₀)
-------
  0000101110111000₂ (3000₁₀)

Kiểm tra tràn:
1000 + 2000 = 3000 ≤ 32767 (2^(16-1) - 1) ✓
Không tràn số

Kết quả: 1000 + 2000 = 3000 (16 bit bù 1)
```

### Bài 10: Cộng -1000 + (-2000) bằng bù 1 trong 16 bit

**Lời giải:**
```
  1111110000010111₂ (-1000₁₀)
+ 1111100000101111₂ (-2000₁₀)
-------
 1111010001000110₂ (-3000₁₀)

Kiểm tra tràn:
-1000 + (-2000) = -3000 ≥ -32767 (2^(16-1) - 1) ✓
Không tràn số

Kết quả: -1000 + (-2000) = -3000 (16 bit bù 1)
```

---

## BÀI TẬP TỰ RÈN LUYỆN (20 bài)

### Cấp độ cơ bản (1-10):
1. Cộng 2 + 3 bằng bù 1 trong 4 bit
2. Cộng 4 + 2 bằng bù 1 trong 4 bit
3. Cộng 6 + 1 bằng bù 1 trong 4 bit
4. Cộng 7 + 0 bằng bù 1 trong 4 bit
5. Cộng 0 + 0 bằng bù 1 trong 4 bit
6. Cộng 50 + 30 bằng bù 1 trong 8 bit
7. Cộng 100 + 20 bằng bù 1 trong 8 bit
8. Cộng 120 + 5 bằng bù 1 trong 8 bit
9. Cộng 127 + 0 bằng bù 1 trong 8 bit
10. Cộng 0 + 0 bằng bù 1 trong 8 bit

### Cấp độ trung bình (11-15):
11. Cộng 1000 + 2000 bằng bù 1 trong 16 bit
12. Cộng 5000 + 1000 bằng bù 1 trong 16 bit
13. Cộng 10000 + 5000 bằng bù 1 trong 16 bit
14. Cộng 20000 + 10000 bằng bù 1 trong 16 bit
15. Cộng 32767 + 0 bằng bù 1 trong 16 bit

### Cấp độ nâng cao (16-20):
16. Cộng 1000000 + 2000000 bằng bù 1 trong 32 bit
17. Cộng 5000000 + 1000000 bằng bù 1 trong 32 bit
18. Cộng 10000000 + 5000000 bằng bù 1 trong 32 bit
19. Cộng 20000000 + 10000000 bằng bù 1 trong 32 bit
20. Cộng 2147483647 + 0 bằng bù 1 trong 32 bit

---

##  MẸO VÀ LƯU Ý

### MẸO LÀM NHANH:
- **Cộng như bình thường** trước
- **Kiểm tra tràn số** sau
- **Xử lý kết quả** theo yêu cầu
- **Nhớ công thức** tràn: kết quả > 2^(n-1) - 1 hoặc < -2^(n-1) + 1

### LƯU Ý QUAN TRỌNG:
- **Tràn số** không phải lỗi, mà là đặc tính
- **Kết quả thực tế** = kết quả mod 2^n
- **Carry flag** = bit tràn (nếu có)
- **Kiểm tra** tràn trước khi sử dụng

### CÁCH KIỂM TRA:
- **Tính toán** kết quả trước
- **So sánh** với phạm vi bit
- **Xử lý** tràn nếu cần
- **Kiểm tra** bằng máy tính

### CÁC TRƯỜNG HỢP ĐẶC BIỆT:
- **A + 0 = A** (cộng với 0)
- **A + A = 2A** (cộng với chính nó)
- **2^(n-1) - 1 + 1 = -2^(n-1) + 1** (tràn dương)

### PHƯƠNG PHÁP NHANH:
1. **Cộng** hai số
2. **Kiểm tra** tràn số
3. **Xử lý** kết quả
4. **Ghi** kết quả cuối cùng

### VÍ DỤ ỨNG DỤNG:
```cpp
// Phép cộng số nguyên có dấu bằng bù 1
struct OnesComplementAddResult {
    int result;
    bool overflow;
};

OnesComplementAddResult onesComplementAdd(int a, int b, int bits) {
    int maxValue = (1 << (bits - 1)) - 1;
    int minValue = -(1 << (bits - 1)) + 1;
    int sum = a + b;
    bool overflow = sum > maxValue || sum < minValue;
    
    if (overflow) {
        sum = sum & ((1 << bits) - 1);
    }
    
    return {sum, overflow};
}

// Kiểm tra tràn số
bool checkOverflow(int a, int b, int bits) {
    int maxValue = (1 << (bits - 1)) - 1;
    int minValue = -(1 << (bits - 1)) + 1;
    int sum = a + b;
    return sum > maxValue || sum < minValue;
}
```

### ỨNG DỤNG THỰC TẾ:
- **Máy tính**: One's complement arithmetic
- **Assembly**: One's complement operations
- **Counters**: Loop counters, array indices
- **Memory addressing**: Address calculations
- **Hash functions**: Checksum calculations

---

**Tài liệu tham khảo:**
- Chương 2: Biểu diễn dữ liệu trên máy tính
- Phần 4.2: Biểu diễn số nguyên có dấu bằng bù 1








