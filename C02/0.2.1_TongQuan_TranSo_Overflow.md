# üî¢ **0.2.1 T·ªîNG QUAN V·ªÄ TR√ÄN S·ªê (OVERFLOW)**

## **M·ª§C TI√äU**
- Hi·ªÉu kh√°i ni·ªám tr√†n s·ªë v√† c√°c lo·∫°i tr√†n s·ªë
- N·∫Øm v·ªØng ph∆∞∆°ng ph√°p x·ª≠ l√Ω tr√†n s·ªë
- So s√°nh tr√†n s·ªë gi·ªØa c√°c h·ªá th·ªëng bi·ªÉu di·ªÖn
- ·ª®ng d·ª•ng th·ª±c t·∫ø trong l·∫≠p tr√¨nh v√† ph·∫ßn c·ª©ng

---

## **L√ù THUY·∫æT C∆† B·∫¢N**

### **üîç ƒê·ªãnh nghƒ©a tr√†n s·ªë (Overflow)**
**Tr√†n s·ªë** l√† hi·ªán t∆∞·ª£ng khi k·∫øt qu·∫£ c·ªßa ph√©p to√°n v∆∞·ª£t qu√° ph·∫°m vi bi·ªÉu di·ªÖn c·ªßa s·ªë bit ƒë∆∞·ª£c c·∫•p ph√°t trong m√°y t√≠nh.

### **üìä C√°c lo·∫°i tr√†n s·ªë ch√≠nh:**

#### **1. Tr√†n s·ªë nguy√™n (Integer Overflow)**
- **Unsigned Integer Overflow**: K·∫øt qu·∫£ > 2^n - 1
- **Signed Integer Overflow**: K·∫øt qu·∫£ > 2^(n-1) - 1 ho·∫∑c < -2^(n-1)

#### **2. Tr√†n s·ªë th·ª±c (Floating Point Overflow)**
- **Overflow**: Exponent qu√° l·ªõn ‚Üí ¬±‚àû
- **Underflow**: Exponent qu√° nh·ªè ‚Üí 0 ho·∫∑c s·ªë kh√¥ng chu·∫©n h√≥a

#### **3. Tr√†n s·ªë d·∫•u ch·∫•m tƒ©nh (Fixed Point Overflow)**
- K·∫øt qu·∫£ v∆∞·ª£t qu√° ph·∫°m vi ph·∫ßn nguy√™n ƒë∆∞·ª£c c·∫•p ph√°t

---

## **üìã B·∫¢NG T·ªîNG H·ª¢P C√ÅC LO·∫†I TR√ÄN S·ªê**

| **Lo·∫°i** | **Ph·∫°m vi** | **ƒêi·ªÅu ki·ªán tr√†n** | **K·∫øt qu·∫£ th·ª±c t·∫ø** |
|----------|-------------|-------------------|-------------------|
| **Unsigned 4-bit** | 0 - 15 | > 15 | K·∫øt qu·∫£ mod 16 |
| **Unsigned 8-bit** | 0 - 255 | > 255 | K·∫øt qu·∫£ mod 256 |
| **Unsigned 16-bit** | 0 - 65535 | > 65535 | K·∫øt qu·∫£ mod 65536 |
| **Unsigned 32-bit** | 0 - 4294967295 | > 4294967295 | K·∫øt qu·∫£ mod 4294967296 |
| **Signed 4-bit** | -8 - 7 | > 7 ho·∫∑c < -8 | K·∫øt qu·∫£ mod 16 |
| **Signed 8-bit** | -128 - 127 | > 127 ho·∫∑c < -128 | K·∫øt qu·∫£ mod 256 |
| **Signed 16-bit** | -32768 - 32767 | > 32767 ho·∫∑c < -32768 | K·∫øt qu·∫£ mod 65536 |
| **Signed 32-bit** | -2147483648 - 2147483647 | > 2147483647 ho·∫∑c < -2147483648 | K·∫øt qu·∫£ mod 4294967296 |
| **IEEE 754 Single** | ¬±1.4√ó10‚Åª‚Å¥‚Åµ - ¬±3.4√ó10¬≥‚Å∏ | Exponent > 127 | ¬±‚àû |
| **IEEE 754 Double** | ¬±4.9√ó10‚Åª¬≥¬≤‚Å¥ - ¬±1.8√ó10¬≥‚Å∞‚Å∏ | Exponent > 1023 | ¬±‚àû |

---

## **üõ†Ô∏è PH∆Ø∆†NG PH√ÅP X·ª¨ L√ù TR√ÄN S·ªê**

### **1. Ki·ªÉm tra tr∆∞·ªõc khi t√≠nh to√°n**
```cpp
// Ki·ªÉm tra tr√†n s·ªë unsigned
bool checkUnsignedOverflow(int a, int b, int bits) {
    int maxValue = (1 << bits) - 1;
    return (a + b) > maxValue;
}

// Ki·ªÉm tra tr√†n s·ªë signed
bool checkSignedOverflow(int a, int b, int bits) {
    int maxValue = (1 << (bits - 1)) - 1;
    int minValue = -(1 << (bits - 1));
    int sum = a + b;
    return sum > maxValue || sum < minValue;
}
```

### **2. X·ª≠ l√Ω sau khi t√≠nh to√°n**
```cpp
// X·ª≠ l√Ω tr√†n s·ªë unsigned
int handleUnsignedOverflow(int result, int bits) {
    int maxValue = (1 << bits) - 1;
    return result & maxValue; // T∆∞∆°ng ƒë∆∞∆°ng result % (1 << bits)
}

// X·ª≠ l√Ω tr√†n s·ªë signed
int handleSignedOverflow(int result, int bits) {
    int mask = (1 << bits) - 1;
    return result & mask;
}
```

### **3. S·ª≠ d·ª•ng Carry Flag (Assembly)**
```assembly
; Ph√©p c·ªông v·ªõi ki·ªÉm tra carry
ADD AX, BX
JC overflow_detected    ; Jump if Carry
JNC no_overflow        ; Jump if No Carry
```

---

## **üìù V√ç D·ª§ MINH H·ªåA**

### **V√≠ d·ª• 1: Tr√†n s·ªë unsigned 4-bit**
```
B√†i to√°n: 10 + 8 = ?
Ph·∫°m vi 4-bit unsigned: 0 - 15

T√≠nh to√°n:
  1010‚ÇÇ (10‚ÇÅ‚ÇÄ)
+ 1000‚ÇÇ (8‚ÇÅ‚ÇÄ)
-------
 10010‚ÇÇ (18‚ÇÅ‚ÇÄ)

Ki·ªÉm tra tr√†n:
18 > 15 ‚úó ‚Üí C√≥ tr√†n s·ªë

K·∫øt qu·∫£ th·ª±c t·∫ø:
18 mod 16 = 2
‚Üí 10 + 8 = 2 (4-bit unsigned, c√≥ tr√†n)
```

### **V√≠ d·ª• 2: Tr√†n s·ªë signed 4-bit**
```
B√†i to√°n: 5 + 3 = ?
Ph·∫°m vi 4-bit signed: -8 - 7

T√≠nh to√°n:
  0101‚ÇÇ (5‚ÇÅ‚ÇÄ)
+ 0011‚ÇÇ (3‚ÇÅ‚ÇÄ)
-------
  1000‚ÇÇ (8‚ÇÅ‚ÇÄ)

Ki·ªÉm tra tr√†n:
8 > 7 ‚úó ‚Üí C√≥ tr√†n s·ªë

K·∫øt qu·∫£ th·ª±c t·∫ø:
8 mod 16 = 8
‚Üí 5 + 3 = 8 (4-bit signed, c√≥ tr√†n)
```

### **V√≠ d·ª• 3: Floating Point Overflow**
```
B√†i to√°n: 0.9 √ó 10¬π‚Å∞‚Å∞
IEEE 754 Single Precision: Exponent bias = 127

Ki·ªÉm tra:
Exponent = 100 > 127 ‚Üí Overflow

K·∫øt qu·∫£: +‚àû (d∆∞∆°ng v√¥ c·ª±c)
```

---

## **üéØ C√ÅC TR∆Ø·ªúNG H·ª¢P ƒê·∫∂C BI·ªÜT**

### **1. Tr√†n ho√†n to√†n (Complete Overflow)**
```
Unsigned: 2^n - 1 + 1 = 0
Signed: 2^(n-1) - 1 + 1 = -2^(n-1)
```

### **2. Tr√†n m·ªôt ph·∫ßn (Partial Overflow)**
```
K·∫øt qu·∫£ v∆∞·ª£t qu√° ph·∫°m vi nh∆∞ng kh√¥ng qu√° xa
‚Üí K·∫øt qu·∫£ = k·∫øt qu·∫£ mod 2^n
```

### **3. Tr√†n √¢m (Negative Overflow)**
```
Ch·ªâ x·∫£y ra v·ªõi s·ªë c√≥ d·∫•u
K·∫øt qu·∫£ < -2^(n-1)
```

---

## **üîß ·ª®NG D·ª§NG TH·ª∞C T·∫æ**

### **1. Trong l·∫≠p tr√¨nh**
```cpp
// C/C++: Integer overflow
int a = 2147483647;  // INT_MAX
int b = a + 1;       // Overflow ‚Üí -2147483648

// Java: Automatic overflow handling
int result = Integer.MAX_VALUE + 1;  // Wraps around
```

### **2. Trong Assembly**
```assembly
; x86 Assembly
MOV AX, 32767    ; Load max 16-bit signed
ADD AX, 1        ; Overflow ‚Üí -32768
JO overflow_handler  ; Jump if Overflow
```

### **3. Trong ph·∫ßn c·ª©ng**
- **CPU**: Arithmetic Logic Unit (ALU) v·ªõi carry flag
- **Microcontrollers**: Overflow detection circuits
- **Graphics**: Pixel value clamping
- **Audio**: Sample range limiting

---

## **‚ö†Ô∏è L∆ØU √ù QUAN TR·ªåNG**

### **1. Tr√†n s·ªë kh√¥ng ph·∫£i l·ªói**
- L√† **ƒë·∫∑c t√≠nh** c·ªßa h·ªá th·ªëng s·ªë c√≥ gi·ªõi h·∫°n
- C·∫ßn **x·ª≠ l√Ω ph√π h·ª£p** cho t·ª´ng ·ª©ng d·ª•ng
- **Ki·ªÉm tra** tr∆∞·ªõc khi s·ª≠ d·ª•ng k·∫øt qu·∫£

### **2. C√°c ph∆∞∆°ng ph√°p ph√≤ng ng·ª´a**
- **Ki·ªÉm tra ph·∫°m vi** tr∆∞·ªõc khi t√≠nh to√°n
- **S·ª≠ d·ª•ng ki·ªÉu d·ªØ li·ªáu** ph√π h·ª£p
- **X·ª≠ l√Ω ngo·∫°i l·ªá** khi c√≥ tr√†n s·ªë
- **Thi·∫øt k·∫ø thu·∫≠t to√°n** tr√°nh tr√†n s·ªë

### **3. Debugging tr√†n s·ªë**
- **S·ª≠ d·ª•ng debugger** v·ªõi overflow detection
- **Ki·ªÉm tra carry flag** trong Assembly
- **Logging** c√°c ph√©p to√°n c√≥ th·ªÉ tr√†n
- **Unit testing** v·ªõi boundary values

---

## **üìö T√ÄI LI·ªÜU THAM KH·∫¢O CHI TI·∫æT**

### **üî¢ S·ªë nguy√™n kh√¥ng d·∫•u:**
- [3.1.2 Ph√©p c·ªông s·ªë nguy√™n kh√¥ng d·∫•u](3.1.2_PhepCong_SoNguyen_KhongDau.md)
- [3.1.4 Ph√©p nh√¢n s·ªë nguy√™n kh√¥ng d·∫•u](3.1.4_PhepNhan_SoNguyen_KhongDau.md)
- [3.1.5 Ph√©p chia s·ªë nguy√™n kh√¥ng d·∫•u](3.1.5_PhepChia_SoNguyen_KhongDau.md)
- [3.1.8 Ph·∫°m vi s·ªë nguy√™n kh√¥ng d·∫•u](3.1.8_PhamVi_SoNguyen_KhongDau.md)

### **‚ûñ S·ªë nguy√™n c√≥ d·∫•u:**
- [4.1.2 Ph√©p c·ªông s·ªë nguy√™n c√≥ d·∫•u](4.1.2_PhepCong_SoNguyen_CoDau.md)
- [4.1.3 Ph√©p tr·ª´ s·ªë nguy√™n c√≥ d·∫•u](4.1.3_PhepTru_SoNguyen_CoDau.md)
- [4.1.4 Ph√©p nh√¢n s·ªë nguy√™n c√≥ d·∫•u](4.1.4_PhepNhan_SoNguyen_CoDau.md)
- [4.1.5 Ph√©p chia s·ªë nguy√™n c√≥ d·∫•u](4.1.5_PhepChia_SoNguyen_CoDau.md)
- [4.1.8 Ph·∫°m vi s·ªë nguy√™n c√≥ d·∫•u](4.1.8_PhamVi_SoNguyen_CoDau.md)

### **üî¢ S·ªë th·ª±c:**
- [6.1.1 S·ªë d·∫•u ch·∫•m tƒ©nh](6.1.1_SoDauChamTinh_FixedPoint.md)
- [6.2.1 S·ªë d·∫•u ch·∫•m ƒë·ªông](6.2.1_SoDauChamDong_FloatingPoint.md)
- [6.3.1 IEEE 754 Single Precision](6.3.1_IEEE754_Single_Precision.md)
- [6.3.2 IEEE 754 Double Precision](6.3.2_IEEE754_DoublePrecision.md)

---

## **üéØ B√ÄI T·∫¨P T·ª∞ LUY·ªÜN**

### **C·∫•p ƒë·ªô c∆° b·∫£n:**
1. X√°c ƒë·ªãnh ph·∫°m vi c·ªßa s·ªë 8-bit unsigned v√† signed
2. Ki·ªÉm tra tr√†n s·ªë: 200 + 100 (8-bit unsigned)
3. Ki·ªÉm tra tr√†n s·ªë: 100 + 50 (8-bit signed)
4. T√≠nh k·∫øt qu·∫£ th·ª±c t·∫ø khi c√≥ tr√†n s·ªë

### **C·∫•p ƒë·ªô trung b√¨nh:**
5. So s√°nh tr√†n s·ªë gi·ªØa unsigned v√† signed
6. X·ª≠ l√Ω tr√†n s·ªë trong ph√©p nh√¢n
7. Ki·ªÉm tra overflow/underflow trong IEEE 754
8. Thi·∫øt k·∫ø h√†m ki·ªÉm tra tr√†n s·ªë t·ªïng qu√°t

### **C·∫•p ƒë·ªô n√¢ng cao:**
9. ·ª®ng d·ª•ng tr√†n s·ªë trong cryptography
10. T·ªëi ∆∞u h√≥a x·ª≠ l√Ω tr√†n s·ªë trong embedded systems
11. Debugging tr√†n s·ªë trong production code
12. Thi·∫øt k·∫ø h·ªá th·ªëng s·ªë tr√°nh tr√†n s·ªë

---

## **üìä T√ìM T·∫ÆT**

**Tr√†n s·ªë** l√† kh√°i ni·ªám c∆° b·∫£n v√† quan tr·ªçng trong:
- **L·∫≠p tr√¨nh**: C·∫ßn hi·ªÉu ƒë·ªÉ tr√°nh bug
- **Ph·∫ßn c·ª©ng**: Thi·∫øt k·∫ø ALU v√† CPU
- **To√°n h·ªçc**: Modular arithmetic
- **B·∫£o m·∫≠t**: Integer overflow vulnerabilities

**H·ªçc tr√†n s·ªë gi√∫p:**
- ‚úÖ Hi·ªÉu s√¢u v·ªÅ c√°ch m√°y t√≠nh x·ª≠ l√Ω s·ªë
- ‚úÖ Vi·∫øt code an to√†n v√† hi·ªáu qu·∫£
- ‚úÖ Debug c√°c l·ªói li√™n quan ƒë·∫øn s·ªë h·ªçc
- ‚úÖ Thi·∫øt k·∫ø h·ªá th·ªëng s·ªë h·ªçc ch√≠nh x√°c

---

**üìÖ C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:** Th√°ng 1, 2025

---

*üéì **Nh·∫≠p M√¥n Tin H·ªçc, 2025** - *GVHD: Th.S V√µ Vi·ªát Khoa* - *Khoa CNTT - Tr∆∞·ªùng ƒê·∫°i H·ªçc M·ªü TP. H·ªì Ch√≠ Minh*
